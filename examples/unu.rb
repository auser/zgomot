require 'rubygems'
require "#{File.dirname(__FILE__)}/../lib/zgomot"

#.........................................................................................................
before_start do
  Zgomot.logger.level = Logger::DEBUG
end

#.........................................................................................................
major_modes = [:ionian, :lydian, :mixolydian] 
minor_modes = [:dorian, :phrygian, :aeolian]

#.........................................................................................................
m0 = mark
m0.add([0.6, 0.4]) do |count|
  np([:A,4],major_modes[count % 3],:l=>4)[7,5,3,1]
end
m0.add([0.4, 0.6]) do |count|
  np([:A,4],minor_modes[count % 3],:l=>4)[7,5,3,1]
end

#.........................................................................................................
str 's0' do
  ch(0) << m0.next(count)
end

#.........................................................................................................
m1 = mark
m1.add([0.6, 0.4]) do |count|
  np([:G,4],major_modes[count % 3],:l=>4)[7,5,3,1].bpm!(16.0/15.0)
end
m1.add([0.4, 0.6]) do |count|
  np([:G,4],minor_modes[count % 3],:l=>4)[7,5,3,1].bpm!(16.0/15.0)
end

#.........................................................................................................
str 's1' do
  ch(1) << m1.next(count)
end

#.........................................................................................................
play
