##############################################################################################################
module Zgomot::Comp

  #####-------------------------------------------------------------------------------------------------------
  class Mode
    
    #.........................................................................................................
    @modes = [:ionian, :dorian, :phrygian, :lydian, :mixolydian, :aeolian, :locrian]
    @intervals = [2,2,1,2,2,2,1]
    chords = {:scale => {:maj=>[1,3,5], 
                         :min=>[2,4,6], 
                         :min=>[3,5,7], 
                         :maj=>[4,6,1], 
                         :maj=>[5,7,2], 
                         :min=>[6,1,3], 
                         :dim=>[7,2,4]},
              :sus2 => {},
              :sus4 => {},
              :aug  => {}}
    
    #####-------------------------------------------------------------------------------------------------------
    class << self
    
      #.........................................................................................................
      attr_reader :modes, :intervals, :trichords, :sus2chords, :sus4chords
    
    #### self  
    end
    
    #####-------------------------------------------------------------------------------------------------------
    attr_reader :scale, :mode
  
    #.........................................................................................................
    def initialize(mode = 1)
      @mode = if mode.kind_of?(Symbol)
                self.class.modes.index(mode)
              else
                mode if mode > 0 and mode <= 7
              end
      raise(Zgomot::Error, "'#{mode}' is invalid mode") if @mode.nil?
      @scale = Scale.new(self.class.intervals, @mode)        
    end
      
    #.........................................................................................................
    def method_missing(method, *args, &blk )
      scale.send(method, *args, &blk)
    end
      
  #### Mode
  end

#### Zgomot::Comp 
end
